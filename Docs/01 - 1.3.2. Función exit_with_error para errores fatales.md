隆Perfecto\! Continuamos completando el archivo de utilidades de error.

### **1.3.2. Funci贸n `exit_with_error` para errores fatales**

A veces, el error es tan grave que el programa (o el proceso hijo que est茅s ejecutando) no puede continuar. Por ejemplo, si falla `execve` en un proceso hijo, ese hijo debe terminar inmediatamente.

Esta funci贸n combina la impresi贸n del mensaje de error y la salida del programa en una sola llamada, limpiando el c贸digo principal.

A帽ade esta funci贸n al final de `src/utils/error_utils.c`:

```c
int	exit_with_error(const char *msg, int code)
{
	if (msg)
	{
		ft_putstr_fd("MSX: ", STDERR_FILENO);
		ft_putstr_fd(msg, STDERR_FILENO);
		ft_putstr_fd("\n", STDERR_FILENO);
	}
	exit(code);
}
```

[cite\_start][cite: 157-158]

#### ** Explicaci贸n detallada l铆nea a l铆nea:**

1.  **`int exit_with_error(const char *msg, int code)`**:

      * Recibe un mensaje `msg` para explicar qu茅 pas贸.
      * Recibe un `code` de salida (por ejemplo, `127` si no se encuentra el comando, o `1` para errores generales).
      * Aunque la definimos como `int` para seguir convenciones, la funci贸n nunca "retornar谩" realmente porque llama a `exit`.

2.  **`if (msg)`**:

      * Verificamos si hay mensaje. A veces querremos salir con un c贸digo de error sin decir nada (silenciosamente), as铆 que permitimos pasar `NULL`.

3.  **`ft_putstr_fd("MSX: ", STDERR_FILENO);`**:

      * Mantenemos la marca de la casa (`MSX:`) para que el usuario sepa que el error viene de nuestro shell y no de otro programa.

4.  **`ft_putstr_fd(msg, STDERR_FILENO);`**:

      * Imprimimos el mensaje espec铆fico del error.
      * Al igual que antes, usamos el descriptor **2 (STDERR)** para garantizar que el error se vea en pantalla.

5.  **`exit(code);`**:

      * **Punto final:** Esta llamada termina el proceso actual inmediatamente.
      * El sistema operativo recibe el n煤mero `code`. Esto es crucial para que, si usas tu shell en un script o con `&&` / `||`, los otros programas sepan que algo sali贸 mal.

-----

Con esto, el archivo `src/utils/error_utils.c` est谩 completo. Tenemos una forma de reportar errores leves (`print_error`) y errores fatales (`exit_with_error`).