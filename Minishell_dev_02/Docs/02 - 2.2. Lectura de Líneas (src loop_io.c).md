### **2.2. Lectura de L铆neas (`src/loop_io.c`)**

**Objetivo de esta secci贸n:**
Ahora que tenemos funciones para mostrar el prompt (`msx_ui.c`), necesitamos un "cerebro" que coordine la lectura. Este m贸dulo se encargar谩 de obtener el texto del usuario (ya sea desde el teclado o desde un archivo/pipe) y prepararlo para ser procesado.

Este archivo actuar谩 como intermediario entre la interfaz visual y la l贸gica de ejecuci贸n.

Antes de implementar el c贸digo C, necesitamos definir el "contrato" o interfaz que usar谩n estos archivos para comunicarse. Es decir, nuestro archivo de cabecera `.h`.

**Instrucci贸n:**
Crea el archivo `includes/loop_io.h`. Este archivo declarar谩 todas las funciones relacionadas con la entrada y el bucle, incluyendo las que ya hiciste en `msx_ui.c` y las que haremos ahora.

Copia el siguiente c贸digo en `includes/loop_io.h`:

```c
#ifndef LOOP_IO_H
# define LOOP_IO_H

# include <stddef.h>
# include <sys/types.h>

/* Declaraci贸n adelantada (Forward declaration) para evitar dependencias circulares */
struct s_shell;

/* Funciones de UI (msx_ui.c) */
void	show_msx_intro(void);
char	*read_msx_line(void);
char	*read_msx_continuation(void);
void	handle_msx_exit(void);

/* Utilidades de Strings (loop_io_utils.c) */
int		is_empty_or_spaces(const char *s);
void	process_segments_array(char **segments, struct s_shell *shell);
void	process_segment(char *segment, struct s_shell *shell);

/* Lectura y Procesamiento (loop_io.c y loop_io_split.c) */
int		read_trimmed_line(char **buf, size_t *cap);
char	**split_by_semicolon(const char *line);
void	process_line(char *line, struct s_shell *shell, int in_history);

/* Lectura interna (loop_io_getline.c) */
ssize_t	ft_getline_internal(char **buf, size_t *cap);

#endif
```

#### ** Explicaci贸n detallada:**

1.  **`struct s_shell;`**:

      * Esto se llama **declaraci贸n adelantada**.
      * Le decimos al compilador: "Existe una estructura llamada `s_shell`, no te preocupes por su contenido ahora".
      * Nos permite usar `struct s_shell *` en los prototipos de las funciones sin tener que incluir `minishell.h` aqu铆, lo que ayuda a mantener las dependencias limpias.

2.  **Agrupaci贸n de Prototipos**:

      * Hemos reunido aqu铆 las funciones de `msx_ui.c` (que ya creaste) con las futuras funciones de lectura. Esto centraliza toda la l贸gica de "Input/Output" en un solo header.

-----

Una vez tengas el header creado, tenemos la base para conectar las piezas.

驴Pasamos al punto **2.2.1. Integraci贸n con `readline` y `add_history`** para crear la l贸gica principal de procesamiento?